<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Main Page | anti-iboss-union</title>
  <style>
    /* ... your existing styles ... */
  </style>
</head>
<body>
  <header>
    <h1>anti-iboss-union</h1>
  </header>
  <main>
    <h2>Welcome to the Resistance</h2>
    <p>
      This is the digital front line. No bosses. No chains. Just code, community, and chaos. 
      We move in the shadows, we build in the open. If you're here, you're one of us.
    </p>
    <div id="register">
      <input type="text" id="username" placeholder="Enter your GitHub username" />
      <button onclick="registerUser()">Register</button>
    </div>
    <div id="adminLogin">
      <input type="text" id="revealCode" placeholder="Enter secret code for admin access" />
      <button id="verifyBtn" onclick="verifyOnce()">Verify</button>
    </div>
    <div id="adminPanel">
      <input type="text" id="adminCode" placeholder="Confirm secret code" />
      <input type="text" id="deleteUser" placeholder="GitHub username to delete" />
      <button onclick="deleteUser()">Delete Member</button>
    </div>
    <div id="userList">
      <h3>Registered Rebels</h3>
      <ul id="list"></ul>
    </div>
  </main>
  <footer>
    âœŠ Powered by the rebellion | anti-iboss-union 2025
  </footer>

  <script>
    const list = document.getElementById('list');
    const storedUsers = JSON.parse(localStorage.getItem('registeredUsers')) || [];
    const SECRET_CODE = 'delete4freedom';

    function renderList() {
      list.innerHTML = '';
      storedUsers.forEach(user => {
        const li = document.createElement('li');
        li.textContent = user;
        list.appendChild(li);
      });
    }

    function registerUser() {
      const input = document.getElementById('username');
      const username = input.value.trim();
      if (username && !storedUsers.includes(username)) {
        storedUsers.push(username);
        localStorage.setItem('registeredUsers', JSON.stringify(storedUsers));
        renderList();
        input.value = '';
      }
    }

    function deleteUser() {
      const code = document.getElementById('adminCode').value.trim();
      const target = document.getElementById('deleteUser').value.trim();
      if (code === SECRET_CODE && storedUsers.includes(target)) {
        const index = storedUsers.indexOf(target);
        storedUsers.splice(index, 1);
        localStorage.setItem('registeredUsers', JSON.stringify(storedUsers));
        renderList();
        document.getElementById('deleteUser').value = '';
      } else {
        alert('Invalid code or user not found.');
      }
    }

    // --- NEW CODE BELOW ---

    // Only allow verify button to be pressed once unless admin
    function verifyOnce() {
      // Check if already pressed
      if (localStorage.getItem('verifyPressed') === 'true') {
        alert("You have already verified. Only admins can verify again.");
        return;
      }
      // Mark as pressed
      localStorage.setItem('verifyPressed', 'true');
      revealAdminPanel();
      // Disable button
      document.getElementById('verifyBtn').disabled = true;
    }

    function revealAdminPanel() {
      const revealInput = document.getElementById('revealCode').value.trim();
      if (revealInput === SECRET_CODE) {
        document.getElementById('adminPanel').style.display = 'block';
        document.getElementById('adminLogin').style.display = 'none';
        // Allow admin to verify again by clearing the flag
        localStorage.removeItem('verifyPressed');
      } else {
        alert('Wrong code. You are not the chosen one.');
      }
    }

    // On page load, check if already verified
    window.onload = function() {
      renderList();
      if (localStorage.getItem('verifyPressed') === 'true') {
        document.getElementById('verifyBtn').disabled = true;
      }
    }
  </script>
</body>
</html>
