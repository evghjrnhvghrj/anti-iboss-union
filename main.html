<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Main Page | anti-iboss-union</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Courier New', monospace;
      background: linear-gradient(to bottom, #000000, #0a0a0a);
      color: #00ffcc;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    header {
      width: 100%;
      padding: 1em;
      background-color: #111;
      border-bottom: 2px solid #00ffcc;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 2.5em;
      color: #00ffcc;
    }
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2em;
      text-align: center;
    }
    main h2 {
      font-size: 2em;
      margin-bottom: 1em;
    }
    main p {
      font-size: 1.2em;
      max-width: 600px;
      line-height: 1.5em;
    }
    #register, #adminLogin, #adminPanel {
      margin-top: 2em;
    }
    input[type="text"] {
      padding: 0.5em;
      font-size: 1em;
      border: 1px solid #00ffcc;
      background-color: #000;
      color: #00ffcc;
      border-radius: 5px;
    }
    button {
      margin-left: 0.5em;
      padding: 0.5em 1em;
      background-color: #00ffcc;
      border: none;
      border-radius: 5px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    button:disabled {
      background-color: #222;
      color: #555;
      cursor: not-allowed;
    }
    button:hover:enabled {
      background-color: #00ccaa;
    }
    #userList {
      margin-top: 2em;
      text-align: left;
      max-width: 400px;
    }
    #userList ul {
      list-style-type: none;
      padding: 0;
    }
    #userList li {
      background-color: #111;
      padding: 0.5em;
      border-bottom: 1px solid #00ffcc;
    }
    #adminPanel {
      display: none;
    }
    footer {
      width: 100%;
      padding: 1em;
      text-align: center;
      font-size: 0.9em;
      color: #777;
      border-top: 1px solid #333;
      background-color: #111;
    }
  </style>
</head>
<body>
  <header>
    <h1>anti-iboss-union</h1>
  </header>
  <main>
    <h2>Welcome to the Resistance</h2>
    <p>
      This is the digital front line. No bosses. No chains. Just code, community, and chaos. 
      We move in the shadows, we build in the open. If you're here, you're one of us.
    </p>
    <div id="register">
      <input type="text" id="username" placeholder="Enter your GitHub username" />
      <button onclick="registerUser()">Register</button>
    </div>
    <div id="adminLogin">
      <input type="text" id="revealCode" placeholder="Enter secret code for admin access" />
      <button id="verifyBtn" onclick="verifyOnce()">Verify</button>
    </div>
    <div id="adminPanel">
      <input type="text" id="adminCode" placeholder="Confirm secret code" />
      <input type="text" id="deleteUser" placeholder="GitHub username to delete" />
      <button onclick="deleteUser()">Delete Member</button>
    </div>
    <div id="userList">
      <h3>Registered Rebels</h3>
      <ul id="list"></ul>
    </div>
  </main>
  <footer>
    âœŠ Powered by the rebellion | anti-iboss-union 2025
  </footer>

  <script>
    const list = document.getElementById('list');
    const storedUsers = JSON.parse(localStorage.getItem('registeredUsers')) || [];
    const SECRET_CODE = 'delete4freedom';

    function renderList() {
      list.innerHTML = '';
      storedUsers.forEach(user => {
        const li = document.createElement('li');
        li.textContent = user;
        list.appendChild(li);
      });
    }

    function registerUser() {
      const input = document.getElementById('username');
      const username = input.value.trim();
      if (username && !storedUsers.includes(username)) {
        storedUsers.push(username);
        localStorage.setItem('registeredUsers', JSON.stringify(storedUsers));
        renderList();
        input.value = '';
      }
    }

    function deleteUser() {
      const code = document.getElementById('adminCode').value.trim();
      const target = document.getElementById('deleteUser').value.trim();
      if (code === SECRET_CODE && storedUsers.includes(target)) {
        const index = storedUsers.indexOf(target);
        storedUsers.splice(index, 1);
        localStorage.setItem('registeredUsers', JSON.stringify(storedUsers));
        renderList();
        document.getElementById('deleteUser').value = '';
      } else {
        alert('Invalid code or user not found.');
      }
    }

    // Only allow verify button to be pressed once unless admin code is entered
    function verifyOnce() {
      if (localStorage.getItem('verifyPressed') === 'true') {
        alert("You have already verified. Only admins can verify again.");
        return;
      }
      localStorage.setItem('verifyPressed', 'true');
      document.getElementById('verifyBtn').disabled = true;
      alert("Verification complete. Only admins can verify again.");
    }

    function revealAdminPanel() {
      const revealInput = document.getElementById('revealCode').value.trim();
      if (revealInput === SECRET_CODE) {
        document.getElementById('adminPanel').style.display = 'block';
        document.getElementById('adminLogin').style.display = 'none';
        // Allow admin to verify again by clearing the flag and re-enabling the button
        localStorage.removeItem('verifyPressed');
        document.getElementById('verifyBtn').disabled = false;
      } else {
        alert('Wrong code. You are not the chosen one.');
      }
    }

    // Attach revealAdminPanel to pressing enter or clicking verify
    document.getElementById('revealCode').addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        revealAdminPanel();
      }
    });
    document.getElementById('verifyBtn').addEventListener('click', function() {
      // Only run verifyOnce if not disabled
      if (!this.disabled) {
        verifyOnce();
      }
    });

    // On page load, check if already verified
    window.onload = function() {
      renderList();
      if (localStorage.getItem('verifyPressed') === 'true') {
        document.getElementById('verifyBtn').disabled = true;
      }
    }
  </script>
</body>
</html>
