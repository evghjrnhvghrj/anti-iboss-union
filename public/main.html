<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Main | anti-iboss-union</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Courier New', monospace;
      background: #0a0a0a;
      color: #00ffcc;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    header, footer {
      width: 100%;
      background-color: #111;
      color: #00ffcc;
      padding: 1em;
      text-align: center;
    }
    #accountTag {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #00ffcc;
      color: #000;
      padding: 5px 10px;
      border-radius: 5px;
      font-weight: bold;
    }
    main {
      flex: 1;
      padding: 2em;
      text-align: center;
    }
    input, button {
      padding: 0.5em;
      font-size: 1em;
      margin: 0.5em;
      border-radius: 5px;
    }
    button {
      background: #00ffcc;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    #userListContainer {
      margin-top: 2em;
      max-width: 300px;
      text-align: left;
    }
    .username-entry {
      background: #111;
      margin: 0.25em 0;
      padding: 0.5em;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <header>
    <h1>anti-iboss-union</h1>
    <div id="accountTag" style="display:none;"></div>
  </header>

  <main>
    <input type="text" id="usernameInput" placeholder="Enter your name">
    <button onclick="registerUser()">Register</button>
    <p id="registerMessage"></p>

    <button onclick="goToShare()">Go to Sharing Page</button>
    <button onclick="goToTest()">Go to Test Page</button>

    <div id="userListContainer">
      <h3>Registered Rebels</h3>
      <div id="userList"></div>
    </div>
  </main>

  <footer>
    ✊ anti-iboss-union 2025
  </footer>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js"></script>
  <script src="/firebase-init.js"></script>
<script>
  // Initialize Firebase Database
  const db = firebase.database();

  <script>
    const db = firebase.database();
  // Register user
  function registerUser() {
    const name = document.getElementById('usernameInput').value.trim();
    if (!name) return;

    function registerUser() {
      const name = document.getElementById('usernameInput').value.trim();
      if (!name) return;
    // Store current user in localStorage
    localStorage.setItem('currentUser', name);
    document.getElementById('accountTag').textContent = name;
    document.getElementById('accountTag').style.display = 'block';
    document.getElementById('registerMessage').textContent = `✔️ Registered as ${name}`;

      // Store current user in localStorage
      localStorage.setItem('currentUser', name);
      document.getElementById('accountTag').textContent = name;
      document.getElementById('accountTag').style.display = 'block';
      document.getElementById('registerMessage').textContent = `✔️ Registered as ${name}`;
    // Add user to Firebase
    db.ref('users/' + name).set({ name });

      // Push user to Firebase
      db.ref('users/' + name).set({ name });
    // Reload user list
    loadUsers();
  }

      // Reload user list
      loadUsers();
  // Load users from Firebase
  function loadUsers() {
    db.ref('users').once('value', snapshot => {
      const userList = document.getElementById('userList');
      userList.innerHTML = ''; // Clear existing list
      snapshot.forEach(child => {
        const entry = document.createElement('div');
        entry.className = 'username-entry';
        entry.textContent = child.key;
        userList.appendChild(entry);
      });
    });
  }

  // Navigate to share page
  function goToShare() {
    const name = localStorage.getItem('currentUser');
    if (!name) {
      alert("🚫 Error 5083: user not registered");
      return;
    }
    // Check if user exists in Firebase
    db.ref('users/' + name).once('value', snapshot => {
      if (snapshot.exists()) {
        window.location.href = 'share.html';
      } else {
        alert("🚫 Error 5083: user not registered");
      }
    });
  }

    function loadUsers() {
      db.ref('users').once('value', snapshot => {
        const userList = document.getElementById('userList');
        userList.innerHTML = ''; // clear old
        snapshot.forEach(child => {
          const entry = document.createElement('div');
          entry.className = 'username-entry';
          entry.textContent = child.key;
          userList.appendChild(entry);
        });
      });
  // Navigate to test page
  function goToTest() {
    window.location.href = 'test.js'; // Adjust if it's a different file
  }

  // On page load
  window.onload = () => {
    const name = localStorage.getItem('currentUser');
    if (name) {
      document.getElementById('accountTag').textContent = name;
      document.getElementById('accountTag').style.display = 'block';
    }
    loadUsers();
  };
</script
    
    function goToShare() {
      const name = localStorage.getItem('currentUser');
      if (!name) {
        alert("🚫 Error 5083: user not registered");
        return;
      }
      // Check if registered in Firebase
      db.ref('users/' + name).once('value', snapshot => {
        if (snapshot.exists()) {
          window.location.href = 'share.html';
        } else {
          alert("🚫 Error 5083: user not registered");
        }
      });
    }

    function goToTest() {
      window.location.href = 'test.js'; // or test.html if that’s what you meant
    }

    // On load
    window.onload = () => {
      const name = localStorage.getItem('currentUser');
      if (name) {
        document.getElementById('accountTag').textContent = name;
        document.getElementById('accountTag').style.display = 'block';
      }
      loadUsers();
    };
  </script>
</body>
</html>
